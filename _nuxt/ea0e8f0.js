(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{477:function(e,t){},479:function(e,t){},540:function(e,t,r){"use strict";r.r(t),r.d(t,"settings",(function(){return j}));r(66),r(58),r(70);var n=r(19),c=r(27),o=r(26),l=r(36),m=r(35),h=r(30),d=r(20),f=r(17),v=(r(87),r(14),r(33),r(31),r(257),r(63),r(50),r(44),r(68),r(25),r(43),r(51),r(260),r(37),r(189),r(76),r(152),r(8),r(54),r(64),r(459)),y=r.n(v),k=r(81),w=r(462),x=r(100);function _(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw c}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var c=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var O=function(e,t,r,desc){var n,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(c<3?n(o):c>3?n(t,r,o):n(t,r))||o);return c>3&&o&&Object.defineProperty(t,r,o),o},j={BoardGameGeekBaseUrl:"https://www.boardgamegeek.com/xmlapi2/",BggBoardGameType:"boardgame",DebounceThrottleInMs:500,NumberToShow:10,PrimaryNameType:"primary"},A=function(e){Object(m.a)(k,e);var t,r,h,d,f,v=I(k);function k(){var e;return Object(o.a)(this,k),(e=v.apply(this,arguments)).collection=null,e.collectionAreaOpen=!0,e.searchResults=[],e.selectedItem=null,e.searchInput="",e.isLoading=!1,e.queriedEntries=[],e}return Object(l.a)(k,[{key:"created",value:function(){var e=this;x.c.ref("users/".concat(this.user.uid,"/collection")).on("value",(function(t){e.collection=t.val()}))}},{key:"addToCollection",value:(f=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.c.ref("users/".concat(this.user.uid,"/collection")),e.next=3,r.push().set({id:t.id,name:t.name});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"changeRating",value:(d=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.c.ref("users/".concat(this.user.uid,"/collection/").concat(t)),e.next=3,n.update(r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"removeGameFromCollection",value:(h=Object(c.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.c.ref("users/".concat(this.user.uid,"/collection/").concat(t)),e.next=3,r.remove();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"toggleAddArea",value:function(){this.collectionAreaOpen=!this.collectionAreaOpen,this.resetData()}},{key:"resetData",value:function(){this.selectedItem=null,this.searchResults=[],this.searchInput="",this.queriedEntries=[]}},{key:"searchEnterPressed",value:function(){this.searchResults.length&&(this.$refs.boardGameSearch.blur(),this.displayEntries())}},{key:"entriesToShow",get:function(){var e=[];if(this.collection)for(var t=0,r=Object.entries(this.collection);t<r.length;t++){var c=Object(n.a)(r[t],2)[1];e.push(c.id)}return this.queriedEntries.map((function(t){return Object.assign({},t,{incollection:e.includes(t.id)})}))}},{key:"displayEntries",value:(r=Object(c.a)(regeneratorRuntime.mark((function e(){var t,r,n,o,l,m,h,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.searchInput.toLowerCase(),r=this.selectedItem?[this.selectedItem]:this.searchResults.slice(0).sort((function(a,b){if(a.name.toLowerCase().startsWith(t)){if(!b.name.toLowerCase().startsWith(t))return-1;var e=a.name.length-b.name.length;if(0!==e)return e}else if(b.name.toLowerCase().startsWith(t))return 1;return+b.yearpublished-+a.yearpublished})).slice(0,j.NumberToShow),n=new URL("thing",j.BoardGameGeekBaseUrl),e.next=5,Promise.all(r.map(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.search=y.a.stringify({id:t.id}),e.next=3,fetch(n.toString());case 3:return r=e.sent,e.next=6,r.text();case 6:return c=e.sent,o=new w.Parser({explicitArray:!1}),e.abrupt("return",o.parseStringPromise(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=e.sent,this.queriedEntries=[],l=_(o),e.prev=8,l.s();case 10:if((m=l.n()).done){e.next=21;break}if(h=m.value,d=h.items.item){e.next=15;break}return e.abrupt("continue",19);case 15:if(f=Array.isArray(d.name)?d.name.find((function(e){return e.$.type===j.PrimaryNameType})):d.name){e.next=18;break}return e.abrupt("continue",19);case 18:this.queriedEntries.push({id:d.$.id,name:f.$.value,description:this._decodeHtml(d.description),image:d.image,url:"https://boardgamegeek.com/boardgame/".concat(d.$.id),maxplayers:d.maxplayers.$.value,maxplaytime:d.maxplaytime.$.value,minage:d.minage.$.value,minplayers:d.minplayers.$.value,minplaytime:d.minplaytime.$.value,yearpublished:d.yearpublished.$.value,incollection:!1});case 19:e.next=10;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),l.e(e.t0);case 26:return e.prev=26,l.f(),e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[8,23,26,29]])}))),function(){return r.apply(this,arguments)})},{key:"_decodeHtml",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"onSearchInput",value:function(input){var e=this;this.selectedItem||(clearTimeout(this._searchTimerId),this._searchTimerId=window.setTimeout((function(){e.fetchResults(input)}),j.DebounceThrottleInMs))}},{key:"fetchResults",value:(t=Object(c.a)(regeneratorRuntime.mark((function e(input){var t,r,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLoading){e.next=2;break}return e.abrupt("return");case 2:if(input){e.next=4;break}return e.abrupt("return");case 4:if(!(input.length<=3)){e.next=6;break}return e.abrupt("return");case 6:return this.isLoading=!0,e.prev=7,(t=new URL("search",j.BoardGameGeekBaseUrl)).search=y.a.stringify({query:input,type:j.BggBoardGameType}),e.next=12,fetch(t.toString());case 12:return r=e.sent,e.next=15,r.text();case 15:return n=e.sent,c=new w.Parser({explicitArray:!1}),e.next=19,c.parseStringPromise(n);case 19:if((o=e.sent).items.item){e.next=23;break}return this.searchResults=[],e.abrupt("return");case 23:this.searchResults=o.items.item.map((function(e){var t;return{id:e.$.id,displayname:e.name.$.value+(e.yearpublished?" (".concat(e.yearpublished.$.value,")"):""),name:e.name.$.value,yearpublished:(null===(t=e.yearpublished)||void 0===t?void 0:t.$.value)||"0"}})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(7),console.log(input,e.t0);case 29:return e.prev=29,this.isLoading=!1,e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[7,26,29,32]])}))),function(e){return t.apply(this,arguments)})}]),k}(k.Vue);O([Object(k.State)("user")],A.prototype,"user",void 0),O([Object(k.Watch)("selectedItem")],A.prototype,"searchEnterPressed",null),O([Object(k.Watch)("searchInput")],A.prototype,"onSearchInput",null);var C=A=O([k.Component],A),S=r(93),T=r(138),L=r.n(T),V=r(539),$=r(252),P=r(456),B=r(393),E=r(537),G=r(175),D=r(150),U=r(176),W=r(115),M=r(177),N=r(179),H=r(85),F=r(543),J=r(538),z=r(384),component=Object(S.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",[r("v-card",[r("v-card-title",[r("v-row",{staticClass:"pa-3"},[r("h3",[e._v("Game Collection")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{on:{click:function(t){return t.stopPropagation(),e.toggleAddArea(t)}}},[r("v-icon",{staticClass:"mr-3"},[e._v("\n              "+e._s(e.collectionAreaOpen?"mdi-plus-circle":"mdi-arrow-left-circle")+"\n            ")]),e._v(e._s(e.collectionAreaOpen?"Add":"Back")+"\n          ")],1)],1)],1),e._v(" "),e.collectionAreaOpen?r("v-card-text",[r("v-list",e._l(e.collection,(function(t,n){return r("v-list-item",{key:n},[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name))])],1),e._v(" "),r("v-list-item-action",[r("v-rating",{attrs:{"half-increments":"",hover:"",large:""},on:{input:function(r){return e.changeRating(n,t)}},model:{value:t.rating,callback:function(r){e.$set(t,"rating",r)},expression:"item.rating"}}),e._v(" "),r("v-btn",{on:{click:function(t){return t.stopPropagation(),e.removeGameFromCollection(n)}}},[r("v-icon",{staticClass:"mr-3"},[e._v("\n                  mdi-minus-circle\n                ")]),e._v("Remove\n              ")],1)],1)],1)})),1)],1):r("v-card-text",[r("v-autocomplete",{ref:"boardGameSearch",attrs:{items:e.searchResults,loading:e.isLoading,"search-input":e.searchInput,"item-text":"displayname","item-value":"id",label:"Board Game Search",placeholder:"Start typing to search","prepend-icon":"mdi-database-search","return-object":""},on:{"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},blur:e.displayEntries,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEnterPressed(t)},click:e.resetData},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}}),e._v(" "),r("v-list",e._l(e.entriesToShow,(function(t,i){return r("v-list-item",{key:i},[r("v-list-item-avatar",[r("v-img",{attrs:{src:t.image}})],1),e._v(" "),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name)+" ("+e._s(t.yearpublished)+")")]),e._v(" "),r("v-list-item-subtitle",[e._v(e._s(t.description))])],1),e._v(" "),r("v-list-item-action",[r("v-row",[r("v-btn",{attrs:{disabled:t.incollection},on:{click:function(r){return r.stopPropagation(),e.addToCollection(t)}}},[r("v-icon",{staticClass:"mr-3"},[e._v("\n                    mdi-plus-circle\n                  ")]),e._v("Add\n                ")],1),e._v(" "),r("v-btn",{staticClass:"ml-2",attrs:{href:t.url,target:"_blank"}},[r("v-icon",{staticClass:"mr-3"},[e._v("\n                    mdi-link\n                  ")]),e._v("Link\n                ")],1)],1)],1)],1)})),1),e._v(" "),e.selectedItem||e.entriesToShow.length===e.searchResults.length?e._e():r("div",[e._v("\n          To return better search results, please write better searches...\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;L()(component,{VAutocomplete:V.a,VBtn:$.a,VCard:P.a,VCardText:B.b,VCardTitle:B.c,VCol:E.a,VIcon:G.a,VImg:D.a,VList:U.a,VListItem:W.a,VListItemAction:M.a,VListItemAvatar:N.a,VListItemContent:H.a,VListItemSubtitle:H.b,VListItemTitle:H.c,VRating:F.a,VRow:J.a,VSpacer:z.a})}}]);